apiVersion: deployments.plural.sh/v1alpha1
kind: GlobalService
metadata:
  name: k8s-demo-single-namespace
  namespace: infra
spec:
  template:
    name: k8s-demo-single-namespace
    namespace: default
    git:
      url: https://github.com/kandula1/helm-charts.git
      ref: main
      folder: charts/k8s-demo-single-namespace
    helm:
      values:
        namespace:
          name: platform-system
          labels:
            environment: shared
            team: platform
        resourceQuota:
          enabled: true
          requests:
            cpu: "4"
            memory: 8Gi
          limits:
            cpu: "8"
            memory: 16Gi
          pods: "30"
        limitRange:
          enabled: true
          defaultRequest:
            cpu: 100m
            memory: 128Mi
          defaultLimit:
            cpu: 500m
            memory: 512Mi
        demoPod:
          enabled: true
          replicas: 1
          image: nginx:1.27-alpine
          resources:
            requestCpu: 50m
            requestMemory: 64Mi
            limitCpu: 200m
            limitMemory: 256Mi
    syncConfig:
      deleteNamespace: false